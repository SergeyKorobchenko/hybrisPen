<%@ page trimDirectiveWhitespaces="true" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="cms" uri="http://hybris.com/tld/cmstags" %>
<%--@elvariable id="categoryNavigation" type="com.bridgex.facades.category.data.CategoryNavigationData"--%>


<nav class="navigation navigation--bottom js_navigation--bottom js-enquire-offcanvas-navigation" role="navigation">
    <ul class="sticky-nav-top hidden-lg hidden-md js-sticky-user-group hidden-md hidden-lg">
        <%--Dynamically generated by 'acc.navigation.js"--%>
    </ul>
    <div class="navigation__overflow">
        <ul data-trigger="#signedInUserOptionsToggle"
            class="nav__links nav__links--products nav__links--mobile js-userAccount-Links js-nav-collapse-body offcanvasGroup1 collapse in hidden-md hidden-lg">
            <%--Dynamically generated by 'acc.navigation.js"--%>
        </ul>
        <ul class="nav__links nav__links--products js-offcanvas-links">
            <c:forEach items="${categoryNavigation.children}" var="childLevel1">
                <li class="auto nav__links--primary <c:if test="${not empty childLevel1.children}">nav__links--primary-has__sub js-enquire-has-sub</c:if>">
                    <span class="nav__link js_nav__link">
                            <a href="<c:url value="${childLevel1.url}"/>">${empty childLevel1.name ? childLevel1.code : childLevel1.name}</a>
                        </span>

                    <c:set value="col-md-12" var="subNavigationClass"/>
                    <c:set value="col-md-2" var="subNavigationItemClass"/>


                    <c:if test="${not empty childLevel1.children}"><span
                            class="glyphicon  glyphicon-chevron-right hidden-md hidden-lg nav__link--drill__down js_nav__link--drill__down"></span>
                        <div class="sub__navigation js_sub__navigation ${subNavigationClass}">
                            <a class="sm-back js-enquire-sub-close hidden-md hidden-lg" href="#">Back</a>
                            <div class="row">
                                <c:choose>
                                    <c:when test="${true}">
                                        <c:forEach items="${childLevel1.children}" var="childLevel2">
                                            <div class="sub-navigation-section ${subNavigationItemClass}">
                                            <c:if test="${not empty childLevel2.code}">
                                                <div class="title">
                                                    <a href="<c:url value="${childLevel2.url}"/>" style="color:black;!important">
                                                        ${fn:escapeXml(empty childLevel2.name ? childLevel2.code : childLevel2.name)}
                                                    </a>
                                                </div>
                                            </c:if>
                                            <ul class="sub-navigation-list <c:if test="${not empty childLevel2.code}">has-title</c:if>">
                                            <c:forEach items="${childLevel2.children}" var="childLevel3" step="10" varStatus="i">
                                                <%-- wrap if more than 'component.wrapAfter' rows in one sub column --%>
                                                <c:if test="${i.index>=10}">
                                                    <c:if test="${!i.first}">
                                                        </ul>
                                                        </div>
                                                    </c:if>
                                                    <div class="sub-navigation-section ${subNavigationItemClass}">
                                                    <ul class="sub-navigation-list <c:if test="${not empty childLevel2.code}">has-title</c:if>">
                                                </c:if>
                                                <c:forEach items="${childLevel2.children}" var="childLevel3" begin="${i.index}" end="${i.index + 10 - 1}">
                                                    <span class="nav__link--secondary">
                                                        <a href="<c:url value="${childLevel3.url}"/>">${empty childLevel3.name ? childLevel3.code : childLevel3.name}</a>
                                                    </span>
                                                    <%--<c:forEach items="${childLevel3.entries}" var="childlink3">--%>
                                                    <%--<cms:component component="${childlink3.item}" evaluateRestriction="true" element="li" class="nav__link--secondary"/>--%>
                                                    <%--</c:forEach>--%>
                                                </c:forEach>
                                            </c:forEach>
                                            </ul>
                                            </div>
                                        </c:forEach>
                                    </c:when>
                                    <%--<c:otherwise>--%>
                                    <%--<div class="sub-navigation-section ${subNavigationItemClass}">--%>
                                    <%--<ul class="sub-navigation-list <c:if test="${not empty childLevel2.title}">has-title</c:if>">--%>
                                    <%--<c:forEach items="${childLevel1.children}" var="childLevel2">--%>
                                    <%--<c:forEach items="${childLevel2.entries}" var="childlink2">--%>
                                    <%--<cms:component component="${childlink2.item}" evaluateRestriction="true" element="li" class="nav__link--secondary"/>--%>
                                    <%--</c:forEach>--%>
                                    <%--</c:forEach>--%>
                                    <%--</ul>--%>
                                    <%--</div>--%>
                                    <%--</c:otherwise>--%>
                                </c:choose>
                            </div>
                        </div>
                    </c:if>
                </li>
            </c:forEach>
        </ul>
    </div>
</nav>
