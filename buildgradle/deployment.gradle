task deploy_file {
	description = 'Creates deployment zip for specified environment and version'
	group = 'Environment'
	doLast {
		def environment_name = System.properties['environment']
		if(environment_name == null){
			logger.error("You have to specify a deployment environment. E.g.: -Denvironment=dev")
			 throw new TaskExecutionException( it,
                new Exception("You have to specify a deployment environment. E.g.: -Denvironment=dev"))
		}else{
			logger.quiet("Environment: " + environment_name)
		}
		def version = System.properties['version']
		if(version == null){
			logger.error("You have to specify a deployment version. E.g.: -Dversion=v00.25")
			throw new TaskExecutionException( it,
                new Exception("You have to specify a deployment version. E.g.: -Dversion=v00.25"))
		}else{
			logger.quiet("Version: " + version)
		}

		def environment = new main.groovy.Environment(project)
        def filename = environment.getAttribute("filename") + '_' + version

        def tempFolder = new File(hybris_temp + '/' + filename)
        tempFolder.mkdir();

        def metadata = file(hybris_temp + '/' + filename + '/metadata.properties')
        metadata.text = "package_version = 2.3"



	}
}